# Проверка работоспособности RAG-пайплайна на тестовых данных

## Набор данных
Использован предоставленный список работ (19 записей) с полями «Работа», «Пункт ремонтной ведомости» и «Описание». Данные приведены к формату JSONL в файле `examples/test_tasks.jsonl`.

## Окружение
- Python 3.11 в виртуальном окружении `.venv`
- Установлены пакеты: `torch 2.3.1+cpu`, `transformers 4.57.0`, `chromadb 0.4.24` и связанные зависимости
- Для эмбеддингов используется модель `BAAI/bge-small-en-v1.5`, загружаемая через `transformers`

## Шаги воспроизведения
1. **Индексация**
   ```bash
   python rag_index.py examples/test_tasks.jsonl --collection test_tasks --reset
   ```
   - Загружено 19 документов, разбито на 19 чанков
   - Эмбеддинги рассчитаны через `HuggingFaceEncoder`
   - Коллекция `test_tasks` сохранена в `chroma_db/`

2. **Проверка поиска**
   ```bash
   python rag_query_simple.py --collection test_tasks --top-k 3
   ```
   Пример запроса: «Какая работа предусматривает подключение пожарной магистрали?»
   - Топ-ответ: запись `000127 / Пожарная безопасность…` с правильным описанием
   - Дополнительные результаты относятся к смежным работам (второй и третий документы менее релевантны, что отражено в расстоянии > 0.59)

## Наблюдения
- Телеметрия `chromadb` пытается отправить события и логирует ошибки `capture() takes 1 positional argument but 3 were given`. Это не влияет на пайплайн, но при необходимости можно отключить телеметрию (например, переменной окружения `ANONYMIZED_TELEMETRY=0`).
- Модель `BAAI/bge-small-en-v1.5` чувствительна к формулировкам: для более точных ответов рекомендовано дополнять запросы ключевыми словами из описаний.

## Выводы
- Индексация и поиск по предоставленному списку работ успешно выполняются.
- Пайплайн готов к обработке большего набора данных при наличии достаточных ресурсов.
